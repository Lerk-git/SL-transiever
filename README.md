# Спецификация приемопередатчика SL-канала

## Описание
Данный проект подразумевает реализацию RTL-описания на языке Verilog одноканального приемопередатчика SL-канала.

## Описание SL-канала
SL - канал - последовательный однонаправленный канал обмена данными, разработанный для внутриплатного и межплатного обмена информацией. Обмен данными типа "точка-с-точкой". Канал состоит из двух линий: линии единиц и линии нулей. Пассивный уровень на линиях - единица. В случае передачи данных каждый разряд кодируется отрицательным импульсом на соответствующей линии. Информация передается словами произвольной разрядности младшими разрядами вперед. Предпоследний разряд - четность. Передатчик вычисляет четность таким образом, чтобы количество импульсов на линии единиц с учетом разряда четности было нечетным, а на линии нулей - четным. Приемник контролирует четность индивидуально по каждой линии. Последним импульсом является синхроимпульс, представляющий собой отрицательные импульсы по обоим линиям одновременно. Синхроимпульс означает, что передача закончена. Не допускается перекрытия информационных импульсов во время передачи.


Типичная рабочая частота передатчика, спроектированного в синхронном стиле, составляет от 500кГц до 1МГц. Пауза между информационными битами равна длительности отрицательного импульса.


## Описание верхнего уровня


### Входные сигналы
.Общие сигналы
* rst_n - асинхронный общий сигнал сброса
* clk - сигнал тактовой частоты
* serial_line_zeroes_a - асинхронный вход линии нулей SL-канала
* serial_line_ones_a - асинхронный вход линии единий SL-канала

.APB-связанные сигналы
* pclk_a - сигнал тактовой частоты
* preset_n_a - асинхронный сигнал сброса
* [7:0]paddr_a - асинхронная шина адреса
* psel_a - асинхронный сигнал выбора устройства
* penable_a - асинхронный сигнал разрешения работы
* pwrite_a - асинхронный сигнал выбора чтения или записи


### Выходные сигналы
Отсутствуют.


### Двунаправленные сигналы
.APB-связанные сигналы
* [31:0]pdata_a - шина данных


### Тактирование сигналов

.Указание на источник тактирования входных и выходных сигналов


|Сигнал                 |Направленность |Клоковый домен
|-----------------------|---------------|--------------
|rst_n                  |in             | async
|serial_line_zeroes_a   |in             | async
|serial_line_ones_a     |in             | async
|preset_n_a             |in             | async
|[7:0]paddr_a           |in             | pclk_a
|psel_a                 |in             | pclk_a
|penable_a              |in             | pclk_a
|pwrite_a               |in             | pclk_a
|[31:0]pdata_a          |inout as in    | pclk_a
|[31:0]pdata_a          |inout as out   | clk




## Программная модель
Пользователю для работы доступно несколько регистров:
. Конфигурационный
. Статусный
. Полученных данных
. Данных к отправке

### Регистр конфигурации

Назначение разрядов регистра config_r

|0     |1-6    |7    |8    |9-15
|------|-------|-----|-----|----
|PCE   |BC[5:0]|MODE |IRQM |Res*

Описание разрядов регистра config_r
. PCE - parity check enable, разрешение контроля четности(PCE = 1), или запрещение(PCE = 0)
. BC - bit count, количество бит в слове
. MODE - выбор режима работы модуля в качестве применика(MODE = 0), или передатчика(MODE = 1)
. IRQM - interrupt request mode, разрешение(IRQM = 1) или запрещение(IRQM = 0) работы прерываний модуля

### Регистр состояния

Назначение разрядов регистра status_r

|0     |1   |2    |3   |4   |5   |6-15
|------|----|-----|----|----|----|-----
|WLC   |WRP |Res* |WRF |PEF |LEF |Res*


Описание разрядов регистра status_r
. WLC - word length check, результат проверки длины полученного слова на равенство значению BC регистра config_r, WLC = 1, если значения не равны
. WRP - word receiving process, флаг идущего процесса приема слова по SL-каналу
. Res* - Зарезервированно
. WRF - word received flag, флаг успешно завершенного приема слова
. PEF - parity error flag, флаг наличия(PEF = 1) ошибки четности принятого слова
. LEF - level error on line flag, флаг наличия ошибки уровня напряжения на линии SL-канала

### Регистр полученных данных
buffered_data_r[31:0]

### Регистр данных к отправке
data_to_send_r[31:0]
